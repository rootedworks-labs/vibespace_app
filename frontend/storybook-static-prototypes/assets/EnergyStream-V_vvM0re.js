import{j as m}from"./jsx-runtime-NjI6IElf.js";import{c as w}from"./utils-CBfrqCZ4.js";import{r as i}from"./iframe-C8_w6ybx.js";import{v as b}from"./vibe-config-Cd54UiDy.js";const g=50,d=8;function j({vibeCounts:f}){const[c,h]=i.useState([]),l=i.useRef(null),[s,p]=i.useState(null);return i.useEffect(()=>{const e=new ResizeObserver(t=>{if(!t||t.length===0)return;const{width:n,height:a}=t[0].contentRect;p({width:n,height:a})});return l.current&&e.observe(l.current),()=>e.disconnect()},[]),i.useEffect(()=>{if(!s||s.width===0)return;const e=Object.values(f||{}).reduce((n,a)=>n+(a||0),0);if(e===0){h([]);return}const t=Object.entries(f||{}).flatMap(([n,a])=>{const v=e>0?(a||0)/e:0,r=Math.round(v*Math.min(e,g));return Array.from({length:r},(u,o)=>({id:`${n}-${o}-${Math.random()}`,vibeType:n,x:Math.random()*(s.width-d),y:Math.random()*(s.height-d),vx:(Math.random()-.5)*.1,vy:(Math.random()-.5)*.1}))});h(t)},[f,s]),i.useEffect(()=>{let e;const t=()=>{if(l.current){const{width:n,height:a}=l.current.getBoundingClientRect();h(v=>v.map(r=>{let u=r.x+r.vx,o=r.y+r.vy,x=r.vx,y=r.vy;return(u<=0||u>=n-d)&&(x=-x),(o<=0||o>=a-d)&&(y=-y),{...r,x:u,y:o,vx:x,vy:y}}))}e=requestAnimationFrame(t)};return c.length>0&&(e=requestAnimationFrame(t)),()=>cancelAnimationFrame(e)},[c.length]),m.jsxs("div",{ref:l,className:"relative h-6 w-full overflow-hidden min-h-[48px]",children:[c.map(e=>{const t=b[e.vibeType];if(!t)return null;const{dotColor:n}=t;return m.jsx("div",{className:"absolute",style:{transform:`translate(${e.x}px, ${e.y}px)`},children:m.jsx("div",{className:w("h-2 w-2 rounded-full",n)})},e.id)}),c.length===0&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("p",{className:"text-xs text-neutral-400",children:"Be the first to share a vibe"})})]})}j.__docgenInfo={description:"",methods:[],displayName:"EnergyStream",props:{vibeCounts:{required:!0,tsType:{name:"union",raw:"Partial<Record<VibeType, number>> | null | undefined",elements:[{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:"keyof typeof vibeConfig",elements:[{name:"literal",value:"flow"},{name:"literal",value:"joy"},{name:"literal",value:"hype"},{name:"literal",value:"warmth"},{name:"literal",value:"glow"},{name:"literal",value:"reflect"},{name:"literal",value:"love"}]},{name:"number"}],raw:"Record<VibeType, number>"}],raw:"Partial<Record<VibeType, number>>"},{name:"null"},{name:"undefined"}]},description:""}}};export{j as E};
