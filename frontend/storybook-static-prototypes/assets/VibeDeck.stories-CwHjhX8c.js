import{j as x}from"./jsx-runtime-NjI6IElf.js";import{r as n,R as z}from"./iframe-C8_w6ybx.js";import{V as A}from"./VibeCard-DteZjTnG.js";import{M as S,i as _,u as D,P as N,a as T,b as B,L as H,m as K}from"./proxy-CtNCmmad.js";import"./preload-helper-D9Z9MdNV.js";import"./Avatar-xvQIVX9v.js";import"./index-Bq94Qvxp.js";import"./utils-CBfrqCZ4.js";import"./EnergyStream-V_vvM0re.js";import"./vibe-config-Cd54UiDy.js";import"./sparkles-D9RuKhIg.js";import"./VibeSelector-TG72iCTM.js";import"./Button-BUkmWVq7.js";import"./iconify-ctjdCR_5.js";class U extends n.Component{getSnapshotBeforeUpdate(r){const e=this.props.childRef.current;if(e&&r.isPresent&&!this.props.isPresent){const o=e.offsetParent,u=_(o)&&o.offsetWidth||0,t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft,t.right=u-t.width-t.left}return null}componentDidUpdate(){}render(){return this.props.children}}function q({children:s,isPresent:r,anchorX:e,root:o}){const u=n.useId(),t=n.useRef(null),d=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:C}=n.useContext(S);return n.useInsertionEffect(()=>{const{width:y,height:i,top:R,left:a,right:f}=d.current;if(r||!t.current||!y||!i)return;const p=e==="left"?`left: ${a}`:`right: ${f}`;t.current.dataset.motionPopId=u;const l=document.createElement("style");C&&(l.nonce=C);const h=o??document.head;return h.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${i}px !important;
            ${p}px !important;
            top: ${R}px !important;
          }
        `),()=>{h.contains(l)&&h.removeChild(l)}},[r]),x.jsx(U,{isPresent:r,childRef:t,sizeRef:d,children:n.cloneElement(s,{ref:t})})}const F=({children:s,initial:r,isPresent:e,onExitComplete:o,custom:u,presenceAffectsLayout:t,mode:d,anchorX:C,root:y})=>{const i=D(G),R=n.useId();let a=!0,f=n.useMemo(()=>(a=!1,{id:R,initial:r,isPresent:e,custom:u,onExitComplete:p=>{i.set(p,!0);for(const l of i.values())if(!l)return;o&&o()},register:p=>(i.set(p,!1),()=>i.delete(p))}),[e,i,o]);return t&&a&&(f={...f}),n.useMemo(()=>{i.forEach((p,l)=>i.set(l,!1))},[e]),n.useEffect(()=>{!e&&!i.size&&o&&o()},[e]),d==="popLayout"&&(s=x.jsx(q,{isPresent:e,anchorX:C,root:y,children:s})),x.jsx(N.Provider,{value:f,children:s})};function G(){return new Map}const w=s=>s.key||"";function k(s){const r=[];return n.Children.forEach(s,e=>{n.isValidElement(e)&&r.push(e)}),r}const J=({children:s,custom:r,initial:e=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:t="sync",propagate:d=!1,anchorX:C="left",root:y})=>{const[i,R]=T(d),a=n.useMemo(()=>k(s),[s]),f=d&&!i?[]:a.map(w),p=n.useRef(!0),l=n.useRef(a),h=D(()=>new Map),[$,L]=n.useState(a),[g,b]=n.useState(a);B(()=>{p.current=!1,l.current=a;for(let m=0;m<g.length;m++){const c=w(g[m]);f.includes(c)?h.delete(c):h.get(c)!==!0&&h.set(c,!1)}},[g,f.length,f.join("-")]);const P=[];if(a!==$){let m=[...a];for(let c=0;c<g.length;c++){const v=g[c],j=w(v);f.includes(j)||(m.splice(c,0,v),P.push(v))}return t==="wait"&&P.length&&(m=P),b(k(m)),L(a),null}const{forceRender:V}=n.useContext(H);return x.jsx(x.Fragment,{children:g.map(m=>{const c=w(m),v=d&&!i?!1:a===g||f.includes(c),j=()=>{if(h.has(c))h.set(c,!0);else return;let M=!0;h.forEach(W=>{W||(M=!1)}),M&&(V?.(),b(l.current),d&&R?.(),o&&o())};return x.jsx(F,{isPresent:v,initial:!p.current||e?void 0:!1,custom:r,presenceAffectsLayout:u,mode:t,root:y,onExitComplete:v?void 0:j,anchorX:C,children:m},c)})})};function I({posts:s}){const[r,e]=z.useState(0),o=s[r],u=()=>{e(t=>(t+1)%s.length)};return x.jsx("div",{className:"relative h-96",children:x.jsx(J,{children:x.jsx(K.div,{initial:{opacity:0,y:50,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.8},transition:{duration:.5},className:"absolute inset-0",drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(t,d)=>{d.offset.x<-100&&u()},children:x.jsx(A,{...o})},o.id)})})}I.__docgenInfo={description:"",methods:[],displayName:"VibeDeck",props:{posts:{required:!0,tsType:{name:"Array",elements:[{name:"Post"}],raw:"Post[]"},description:""}}};const O=[{id:1,author:"Alex",content:"Morning vibes are the best.",timeWindow:"Morning",vibeCounts:{flow:8,joy:5}},{id:2,author:"Brenda",content:"Just finished a great workout!",timeWindow:"Morning",vibeCounts:{love:15}},{id:3,author:"Chris",content:"Afternoon coffee break.",timeWindow:"Afternoon",vibeCounts:{joy:22,glam:4}}],de={title:"Prototypes/VibeDeck",component:I,tags:["autodocs"],args:{posts:O}},E={};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:"{}",...E.parameters?.docs?.source}}};const fe=["Default"];export{E as Default,fe as __namedExportsOrder,de as default};
